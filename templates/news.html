{%extends 'base.html'%}
{%load static%}
{%block title%}
   {{news.title}}
{%endblock%}

{%block meta%}

{%endblock%}

{%block content%}
   <!--================Blog Area =================-->

<section class="blog_area single-post-area ">
   <br>
   <div class="container">
       <div class="row">
           <div class="col-xl-8 posts-list col-lg-7">
               <div class="single-post">
                  <h2>{{news.title}}</h2>
                       <ul class="blog-info-link mt-3 mb-4">
                           
                           <li><a href="#"><i class="fa fa-calendar"></i>{{news.created_at.date}}</a></li>
                           <li><a href="#"><i class="fa fa-eye"></i>{{news.views}}</a></li>
                       </ul>
                   <div class="feature-img">
                       <img class="img-fluid" src="{{ news.banner_image.url }}" alt="">
                   </div>
                   <div class="blog_details">
                       
                       <div class="richfield">
                           {{ news.text | safe }}
                       </div>
                   </div>
               </div>
           </div>
           <div class="col-xl-4 col-lg-5">
               <div class="blog_right_sidebar">

                  <aside class="single_sidebar_widget popular_post_widget">
                     <h3 class="widget_title">So'ngi habarlar</h3>
                     
                     {%for i in recents%}
                    
                        <div class="media post_item">
                            <a href="{%url 'news' i.slug%}">
                           <div style="width: 100px; height: 100px; background-image: url({{i.banner_image.url}}); background-size: 100%; background-position: center; background-repeat: no-repeat;"></div>
                            </a>
                           <div class="media-body">
                              <h3>{{i.title}}</h3>
                              </a>
                              <p>{{i.created_at}}</p>
                           </div>
                        </div>
                    
                     {%endfor%}
                  </aside>

               </div>
            </div>
         </div>
      </div>
      <div class="container">
         <div class="row">
            <div class="col-12">
                <!-- Nav Card -->
                <div class="tab-content" id="nav-tabContent">
                    <!-- card one -->
                    <div class="tab-pane fade show active s" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">           
                        <div class="whats-news-caption">
                                <!-- Yandex.RTB R-A-10548229-7 -->
                                <div id="yandex_rtb_R-A-10548229-7"></div>
                                <script>
                                window.yaContextCb.push(() => {
                                    Ya.Context.AdvManager.render({
                                        "blockId": "R-A-10548229-7",
                                    "renderTo": "yandex_rtb_R-A-10548229-7"
                                    })
                                })
                                </script>
                           <hr> 
                           <h3>O'xshash yangiliklar</h3>
                           <br>
                            <div class="row">
                            <style>
                                .news-card {
                                background-color: #fff;
                                border-radius: 10px;
                                overflow: hidden;
                                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                                margin-bottom: 20px;
                            }
   
                            .news-image {
                                height: 100px; /* Adjust as needed */
                                overflow: hidden;
                            }
   
                            .news-image img {
                                width: 100%;
                                height: 100%;
                                object-fit: cover; /* Ensure the image covers the entire container */
                            }
   
                            .news-content {
                                padding: 20px;
                            }
   
                            .news-title {
                                font-size: 10px;
                                margin-bottom: 10px;
                            }
   
                            .news-category {
                                font-size: 10px;
                                color: #888;
                            }
   
                            </style>
                            
                                {%for i in all%}
                                
                                <div class="col-xl-2 col-lg-3 col-md-4 mb-4 col-sm-6 col-6 overflow-hidden">
                                    
                                        <div class="single-what-news">
                                            <div class="news-card">
                                                <a href="{%url 'news' i.slug%}">
                                                    <div class="news-image">
                                                        <img src="{{ i.banner_image.url }}" alt="News Image">
                                                    </div>
                                                </a>
                                                
                                                <div class="news-content" style="height: 100px;">
                                                    <h6 class="news-title">{{ i.title }}</h6>
                                                    <p class="news-category">{{ i.category }}</p>
                                                </div>
                                                
                                                <div class="col-12 justify-content-end d-flex">
                                                    <p style="font-size: 10px;"> {{i.created_at.date}}</p>
                                                </div>
                                            </div>
                                    
                                    </div>
                                </div>
                                {%endfor%}
                                
                            </div>
                        </div>
                    </div>
                </div>
            <!-- End Nav Card -->
            </div>
      </div>

   </section>
   <style>
      .richfield img{
         width: 100% !important ;
         height: auto !important;
      }
   </style>
   <!--================ Blog Area end =================-->
   <script>
    function createMetaKeywordsFromTitle() {
        // Get the title of the document
        const title = '{{ news.title }}';

        // Split the title into words
        const words = title.split(' ');

        // List of common stop words to filter out
        const stopWords = ['va', 'bilan', 'kabi', "bo'ldi",'bo`ldi', 'qildi', 'mumkin', 'boâ€˜ldi', 'deb'];

        // Filter out stop words and empty strings
        const keywords = words.filter(word => !stopWords.includes(word.toLowerCase()) && word.trim() !== '');

        // Create a meta tag for keywords
        const metaKeywords = document.createElement('meta');
        metaKeywords.name = 'keywords';
        metaKeywords.content = keywords.join(', ');

        // Append the meta tag to the head
        document.head.appendChild(metaKeywords);

        // Debugging: Log the keywords
        console.log('Meta keywords:', keywords.join(', '));
    }

    // Call the function to create meta keywords from title when the document is loaded
    window.onload = createMetaKeywordsFromTitle;
</script>

<!-- Yandex.RTB R-A-10548229-8 -->
<script>
    (function renderInImage(images) {
        if (!images.length) {
            return
        }
        const image = images.shift()
        image.id = `yandex_rtb_R-A-10548229-8-${Math.random().toString(16).slice(2)}`
        window.yaContextCb.push(() => {
            Ya.Context.AdvManager.render({
                "renderTo": image.id,
                "blockId": "R-A-10548229-8",
                "type": "inImage"
            })
        })
        renderInImage(images)
    })(Array.from(document.querySelectorAll("img")))
    </script>
{%endblock%}